/**
 * [★★★★★]318. Maximum Product of Word Lengths
 * finish: 未完成
 * https://leetcode.com/problems/maximum-product-of-word-lengths/
 */

/**
 * @param {string[]} words
 * @return {number}
 */
var maxProduct = function (words) {
    var max = 0, pattern = getPattern(words);
    for (var i = 0; i < words.length; i++) {
        for (var j = i + 1; j < words.length; j++) {
            if (!commonLetter(i, j, pattern)) {
                max = max > words[i].length * words[j].length ? max : words[i].length * words[j].length;
            }
        }
    }
    return max;
};

function getPattern (words) {
    var h = {};
    for (var i = 0; i < words.length; i++) {
        for (var j = 0; j < words[i].length; j++) {
            var letter = words[i][j];
            if (typeof h[letter] === 'undefined') {
                h[letter] = '';
            }
            var reg = new RegExp(',' + i + '(,)?');
            if (!reg.test(h[words[i][j]])) {
                h[words[i][j]] += ',' + i;
            }
        }
    }
    return Object.values(h).join(';');
}

function commonLetter(index1, index2, pattern) {
    var reg = new RegExp(',' + index1 + '(,\\d+)*,' + index2 + '(,)?');
    return reg.test(pattern);
}

write('algorithms: 318. Maximum Product of Word Lengths', 'title');
write(maxProduct(["edadc","ebbfe","aacdde","dfe","cb","fddddff","fabca","adccac","ece","ccaf","feba","bcb","edadc","aea","bacb","acefa","fcebffd","dfeebca","bedcbaa","deaccc","abedc","dadff","eef","ddebbb","abecab","cd","abdeee","eedce","deef","dceaddd","ced","fbbf","ba","eefeda","fb","cddc","adafbf","dded","aadbf","caefbaf","ccebf","dbb","ee","dadcecc","ddbcabb","afeaa","ec","aad","efde","cbcda","cdbdafd","cddc","ecaaa","ae","cfc","bccac","cdcc","abbbf","fcdface","ddbcdc","bfebb","daed","bc","dc","ecdfc","eeb","bb","dad","caecb","fbe","bbbc","cacea","dbc","fbe","bcfffbd","aeda","cff","ddfc","ea","bdfd","ccb","cb","ae","ceabefa","dcea","cbaed","bfedf","fa","ccd","fece","bceef","acabca","dafa","fdeec","dac","cae","adeeadb","ecacc","acfe","de"]));
write(maxProduct(["abcw", "baz", "foo", "bar", "xtfn", "abcdef"]));
write(maxProduct(["a", "ab", "abc", "d", "cd", "bcd", "abcd"]));

["ffdeeabbccfaaeebfccaddcbd","ddfcfbaf","ffcdefefacdfbfdc","fa","fecfde","efcedddafebcbbfaae","efafbf","ecbcbed","aaec","bdedcbfafccaafcfefeffdc","ffdac","cbefdffbbed","dfaefdccaddaacbaca","eda","beedefdddafeedaffcafcabbe","dbabfefaabdecbff","adcccdcefaefdddd","dafcdaebaafdeabcfeacbbbf","eadeebfbcdacaabe","cceaa","dfbdccfecafbdeacbddaedf","addbabd","aaaaacfc","cddaacabfefbfcffecacaa","ebcfeaf","ecffcffbcadeefbabaccafda","bbcbffefaeaccedeb","dcfabedbffbcdceacbcecdedf","afbdebcbccfcfac","eadcabedbcafadbefa","fefeaddbcecaed","fdeaacbcebacebadaeb","ccddfafcbaffbeedfa","edbc","cabefdafe","dadedfbabbfcbfeabcea","feabba","ddbdeeefcbdde","acecdbeceabbdcee","edf","bbdcffdadfabefaddadd","bcdbbedebafcfffeeca","bceebbcffdabbee","edcbfeabfbaeadea","efabbcaafcbca","badcbfcecedbebbdaaaeddf","cbbcfabbfdfebddcfffcbeebacf","fbbfcdbdbeacdeeabb","aaae","adfefeb","efcafdcaedebbc","befcaeadefafdcec","dddb","ecccbbdceeecd","def","debdfddeeaddfdddabccabfe","dbcabccedecadb","bfbde","ddddaeeacdeedcafbfabbc","dbbefcfcbfcfbdccacffdaafd","dcdcebfbefccebbaebafbdaffda","ddeefdefdccedceecfcfbdeeeda","acfcadcafcc","eebeadacbeccedfffc","fcaacdeaaca","cecaebfcfbfeefcdbbfabdbcf","ffcffdd","babcbe","abbfefaedfddeba","fafafceeabcaefaddcccd","bf","bbceecebf","bdfbfbfbeffbdeccb","fcafdded","afafecfcfecfd","dcbebcfbafdaebbaaaae","ecbceeecccfc","eecffefc","dedaffdcacbccadedafefebdb","afabaaacdbefffbe","faf","dfeccfefcbbbec","cabddbdefddeafdb","fcbbabfabccefcebeefaecdb","afbdfd","ffafaadafeaabaadabb","caffbddcafddbfcdfb","dadaacfeaaebeda","faedabdfafcafa","fdcefefc","afbfdadeaeeddceddeebeaaeac","eeddeabaadbacddffedfbccdbed","aecdbfeae","eddaabaabfeacbefbbdecdc","aabcfefba","ebaaedce","faabcafcfebdcccfcd","daefbbeccbebacffc","fecffce","dedfcdebdeaddacaceabdccacec","afeacaaffbebcefbcfeefefa","caeaecbcb","eabadbbde","fcdddeabc","ceaa","babbabeebebcaafacec","bddfeedadefbbfbcecdc","dadfeddfbb","fefcacffdcabbdedafc","eeaafabebbeadf","cbefdcfbdd","bffbdaddfbecfedcabd","fdaa","cbdcddfcaddebbac","dfdfcaccefbbbedecabdaf","aecaae","cebebbafdfe","aebedfafafcbfcacfdace","aaeffe","adbbeaeabe","abbdcdaebeedddfcce","edafcaeecdbec","effabfcccbccefbfcefdc","faecfcddff","ddffcdaefc","ffcbbdffcadfccedceaadbda","bdcccefcbeafcdfa","fcfcfabcb","bfbacfbeeee","becfbfcbbbbacafecdfabafcff","eadfeffe","ef","caebbdedeccfcaaddcabadad","feb","aaaeeaebcbfbbcaccddfccde","bafaadcdbbcffefbcecf","baacc","dffcbdbdaef","aeffdbeebbeeeabcedefadefcea","bcbdffd","baaedcbceafbccebbebbeeeaffc","afbbeafedffcfbafbcb","bcbcbbdfcca","cacaaafdeee","eadcefdddddcd","daaddaaeebeefbcec","cedcfbdcdcadbb","aafcfe","edeaa","bffadeddccaacdcaa","acadbccfefab","dcffaecdaebeecccdacdbde","afdcccefaf","eeacebdcbdbcccb","faaecacaeceebcb","ebcaeffdffacffabbabccefaa","cbcdcadefdabbdcdafba","cdadfacadafeabcecdacbaaccc","dab","ffaeffaccfefacfdafbaccbf","fbcefcdbfabdbdabac","cdfccfdef","cedcfeaedddababdffdbabf","cbdacdffcc","bcfdc","edfcbaecdbabcbcaecdc","edadfcfadefcddbf","dbedfdcdccbddaccaffabbdd","deabbccdaaddf","eeadc","aefccfebeecabdfbda","dccfcdacafebecbefebdfdebf","fabbebdbaff","bfdfbddaeeeaacfeca","bafdfdfae","fecfaadffbcfdabfac","abcaaeefbbefcadeaceadffeb","aaafdeefbfccafeaedaea","ebafdfbcdfdddbbeedbfecbbcfb","edfbeccdcaccf","bbdceffbeabcafae","eeadaaedd","aeecbfecdeeadafded","fbdbdbfadbcab","dcdaadabfbb","fccdcfffefbcdb","dfbfcae","beedccaafbadcacadfd","bcfbdbfdcbfd","aafedacbabfeddedaadcb","acfdbfaccbcbac","bfeaaaafcaeddaffccebacbbff","fbdcacacbabddebdeecccba","cdededefebaedb","abeadffbacee","aadabfddcaeadefdfefba","edffcdd","acceeaeacacaa","cbeafbafccdbbdfbfccbe","eeebbfceacbfdddfebf","cd","bebfbfcc","dccfffcedaafbcbaccec","facefddfaafaafddfcbdaf","caedfcfbbede","fdfcdaebefdaacbf","deccabcfeabfebccfaafbe","ea","dbbabdcf","adeaaaefcbffdccbf","deacacddcbfeadcefdccbd","ccebddbebacbecafcdaceeadbd","decafccaaf","cecbabcbffbfac","effeeafbdbdfdcaaedbfadbaaba","fcffccabafdafbdbbf","fcaea","eab","cbcbcdbfdfcfeaacfd","bebcdbbaeaccaebfaafac","fdfdcebbadbba","bb","ababebaadadebc","aeacecacffedfceeacdde","feacdbcefbeaeddcdccdebee","fafadacdedeebdafedccc","dbffaedaebeaedbccfc","ebdaabeefbaaa","bacaaeebfaaeaabccbbfa","cebacdbdaeeeddaacdefdbdc","cfbbdf","ffdbcdcfcdbfcebaaecbdfdbac","ecdacadfdcbcdcdedbfaf","cffcaeccac","acceacbdfbedfddefeaedf","fdbfdebcbfbeddefaaedfabcea","ddaafbcfdadfbeacbcf","dafa","efbefeebddbaefafbed","dffeff","ffcedbb","fefbeb","aedffaebe","dfdcfeeedaaecceebbabfcafeab","bddcfedacfda","dafdfeeebbdbbefbcceddbdfcdc","dbdaaeddbafaeeeabdcbeafbfb","dcbdfeabadcffebb","cecbaccecfcbe","fddfedbdadacdaadbdfeba","bddebcfdbaeec","cfaaabc","eddbcbccab","fafffecdcacedacacbcefddcfc","fccbabfdeefceb","cacddeceafeacdffffdccfddac","dcdfbdacdbbadebbcdc","dabde","dbacaeca","beefdbcc","cedbbebbfabdbdbbba","badedaadbbfacfafcedec","fcdcabddcdaceddeaababebc","efafbcfbeafaecee","addcbafad","efbdacbbf","bbabbbcfaaffdbfcf","abecfeaadaedff","fe","adfdfffdedbabfeffbffcbdfdbe","edccafdadecbabdcfcfadd","ddaddcedbbadccbfaebf","fdcaaddaf","fcdcbddebbecdbfce","dfaecbbfccbbfddbfbfadfecbf","defcdefbaffdcfdddaebed","cadecbaecacefabcdea","bcbdaebbdebbcdb","dddd","bcfecafefcbfacdecfc","fbefeefa","ffcacbd","ffafebf","dbfaddfadcfcdeddcebe","babbcefcb","aebfcddcdefadb","baecddabbdecefdefdfc","bebe","ebbbfbcabfccbcacaccbcab","ecffedefbbdccfdafbaddf","bdbbbecfafb","bfaeedcadcbdbddcbcaaeffbccd","dbdcdffbb","caee","ccfcabecdaee","abbecaeefc","cdbfbcfbfeddcbcbadbceabede","adddfddcebdcebdb","cbfff","cafafbcabbbcedd","fedcebffdadfbcedbd","fedbedcdbabbbcdadd","fdfeddeaefadcffadadaf","abaebbbaebebfa","dcdbfdedad","afdaebcdccfaadefdbeaddcabed","bccbceffcdfefbcbd","efeeecefdcbdabcb","cdc","cddadccadefbaccdcbfffedaa","dacbcddabeddbbcaebdeca","eccfaddaa","daabba","eceafbcadfdebfceda","abddbaebeccacfdefbacdc","cdcfdaeccdcfaadfdfdecba","eacaffbdaabe","acdbecfebbdbbebaaab","faebacdafcecafbecca","ccedcefaabfaa","ecaebdb","deeaeafbddfdafcfcd","ef","fceab","cdbceecbbfbebadcddbcbfb","cccafeecedbddfadedddadf","abfbccafbcbddfcdaaeefffa","dcdbdcdfbaffdcaafebddadf","bdaaecccbdeccabbdaafcc","addfeeedbeacffdcbfaadbdb","effcbbeaaebeefbaeec","adfcaa","ebceffbaefbadfbfcefa","aaefbaedddcdbbfabb","aeadcfeaddabbffefdcadc","ddbcfede","cfeffaecb","cddedebabefe","ecdb","aafddabfdadacafdfbbaba","dfcadfaeddafafc","daecbfbfaecfafadeacdedafdd","baef","afdfefdcacceaeebbeebd","faa","da","dbddbfbdcaeececfcccdfa","acff","fdfafca","ebbdebfffdcfdecffcbe","bacbdfe","afebcaceebaf","deafafaafdaadddaacaacccb","acdbaefabe","aaeafdbbabbcdceda","adfbafbdbcafbcb","aabccc","ddcadc","aedcbdfcccdccabbabbaadf","dbcfcdacad","aacaceadafbdafaccfaaceb","bbcdebdea","bfaeedbacbabedefbfcadedcecd","dccf","caafbcabafffec","cfcbebacbdcbabafdeeebcffda","dbfcffcbadcfcacdcdbccfdfa","bdc","dadcfeaeaeeebcbd","bffcbfdebccedb","cccdceebfcfdacacdca","aceddacdbfd","aefdafcfccfbc","cdba","deaaeacabdcabffecbdacedeae","ccdbeaefbcad","ebfbaddaeeceedeacafd","adabdefefaadaacabdcebfd","cdddccadacbeeebceecb","ededea","cdfe","afeafcefc","ebddbcfebfefceffcc","edcab","abacacdbfcfcfdaaceeca","dbaffc","dabeddddbbbaaebb","adcbecfdbbfe","baacbbbfddacbabdaefecfc","daadbafbaebe","bedbbaaedcdafcfaabbbee","dacbea","ecbffbfb","cdcbadbfacb","fbceeccaffadeecddbdbee","acafbedfccdfb","dabdbfdeeeabdaafbafbecc","bcfddddcbbbaebbaee","bcaecbeafdeafdeadfbccf","bebafeaddfedfcdbabcbeba","fabeaafacdfcfcccacdfbadad","eebdefbdacfbabcfeeffcfeeffa","feeefdbaddccfdbcfc","dafbbaccbefabfefdea","fefdfebaaefbffcd","eabcafbceebadaafe","adbedea","cdacfcccaeaadcbcefcf","cfeacbdcceabaeedded","bc","ccbcdbaca","abffcac","eefadddfcebeaffdadcedbcbede","aebacddeaedefdebeac","efcacefcf","aaebdbffd","fffbdefadfabdeafbbabfbaabf","dfddceaebfc","ecbcabf","deacadfbcffdcfaecacabcecf","ccaabeaacba","eaaabf","eaabdfeaadbedbdbbbeec","eddeceddfaeecbcbcefaaec","eafeacecddafaeefedabdddbfea","eda","dbeeeeabbbfbdceed","eab","caddafbbe","efcafcfecbbfdebeeedde","cbeeffadfbbfa","bffadcbccf","dfacafacceaabebbaeb","bbadbceffffbafafdbaacebce","daedaaacbfbdbbeaeeddbedbdc","fcbbd","bbeffdddfee","acaeacf","aaabdedabcadafebcdeac","ddbeabddbaeefadfcafbe","bcabcbccdcefdacccfdbaebee","dfebcefc","eeeeecfbccbf","bde","bdedfebfccbedfbbeadaffdbaa","ebacbaaaafbcdcbbdbcdaec","cbeede","fda","cddfcf","ffcaefdd","aadbaaacbabb","aefacadaaccbdebbef","beedaaeccddfbdadbfafdbedaf","dcfafcfdbfceefff","dbcdf","edfecd","bcdac","fceda","edefbeabafcacc","bcafeccb","dccffb","afdd","ccbaecfe","ebddebaaacfe","cfffacdebdb","dedbabcfb","feefaadabd","cbadfadabbecdda","dfe","beabcbeefcdbceaaececaccbed","eae","afaeaffbaecfcbfbdb","bccbbddfbeea","adccfeddaebddbcbedaddbdbccb","ddabaeaacbcddabbaaaefcc","cbe","dcfbffbcebeedad","adfadccabfabfadc","fdfbaaaabccbffcfaebbcfcc","efbcac","aafdbbfbdabaebaa","eefccdaabebfbaceeadebcacb","bfeeecafefbdeeaadfbdfae","fafbefbceacaeecdcddafbb","dd","bcbbaabdfdaeb","ceedacfaddf","cfabefcfeaeaecbeeabdfbcadb","bfcfcafebcffbcf","fbcdaddcacecbdbbdefdbadfaad","eafdecedbafaadafbdf","bbedffcedcaffdcbfdeeabdbf","dcc","eeeeaffebbef","bfaddbbcbefbcaaebfd","bdd","cceecfbab","ebacdfebafcf","cab","beeedffa"]